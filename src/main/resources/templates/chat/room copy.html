<!-- <!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Yummy AI ì±„íŒ…</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body { background-color: #f2f2f2; font-family: Arial, sans-serif; }
        .chat-container { max-width: 600px; margin: 50px auto; background: white; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); overflow: hidden; }
        .chat-header { background-color: #ff6b6b; color: white; padding: 15px; text-align: center; font-weight: bold; }
        
        .chat-box { height: 400px; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        
        /* ë§í’ì„  ìŠ¤íƒ€ì¼ */
        .message { max-width: 70%; padding: 10px 15px; border-radius: 15px; font-size: 14px; line-height: 1.4; position: relative; }
        .message.user { align-self: flex-end; background-color: #ffda00; color: #333; border-bottom-right-radius: 0; }
        .message.ai { align-self: flex-start; background-color: #f1f0f0; color: #333; border-bottom-left-radius: 0; }
        
        /* ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
        .input-area { display: flex; padding: 15px; border-top: 1px solid #eee; background: #fff; }
        .input-area input { flex-grow: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px; outline: none; }
        .input-area button { margin-left: 10px; padding: 10px 20px; background-color: #ff6b6b; color: white; border: none; border-radius: 20px; cursor: pointer; }
        
        /* ë ˆì‹œí”¼ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .recipe-card { border: 1px solid #ddd; border-radius: 10px; padding: 10px; margin-top: 5px; background: white; cursor: pointer; transition: 0.2s; }
        .recipe-card:hover { background-color: #f9f9f9; border-color: #ff6b6b; }
        .recipe-card h4 { margin: 0 0 5px 0; color: #ff6b6b; }
        .recipe-card p { margin: 0; font-size: 12px; color: #666; }
    </style>
</head>
<body>

    <div class="chat-container">
        <div class="chat-header">AI ì•¼ë¯¸ ğŸ‘¨â€ğŸ³</div>
        
        <div class="chat-box" id="chat-box">
            <div class="message ai">ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ìš”ë¦¬ ì¶”ì²œ AI ì•¼ë¯¸ì…ë‹ˆë‹¤. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</div>
        </div>
        
        <div class="input-area">
            <input type="text" id="user-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeypress="if(event.keyCode==13) sendMessage()">
            <button onclick="sendMessage()">ì „ì†¡</button>
        </div>
    </div>

    <script>
        function sendMessage() {
            const input = $('#user-input');
            const message = input.val().trim();
            if (!message) return;

            // 1. ì‚¬ìš©ì ë©”ì‹œì§€ í™”ë©´ì— í‘œì‹œ
            $('#chat-box').append(`<div class="message user">${message}</div>`);
            input.val('');
            scrollToBottom();

            // 2. ì„œë²„ë¡œ ì „ì†¡
            $.ajax({
                url: '/chat/send',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ message: message }),
                success: function(response) {
                    // 3. AI ì‘ë‹µ í‘œì‹œ
                    let aiHtml = `<div class="message ai">${response.response}`;
                    
                    // ë ˆì‹œí”¼ ì¶”ì²œì´ ìˆìœ¼ë©´ ì¹´ë“œ ì¶”ê°€
                    if (response.recommendedRecipe) {
                        const r = response.recommendedRecipe;
                        aiHtml += `
                            <div class="recipe-card" onclick="location.href='/recipe/detail/${r.recipeId}'">
                                <h4>ğŸ³ ${r.name}</h4>
                                <p>â± ${r.time}ë¶„ | ğŸ‘¤ ${r.serving}ì¸ë¶„</p>
                                <p style="color:blue; font-size:11px; margin-top:5px;">í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°</p>
                            </div>
                        `;
                    }
                    aiHtml += `</div>`;
                    
                    $('#chat-box').append(aiHtml);
                    scrollToBottom();
                },
                error: function() {
                    $('#chat-box').append(`<div class="message ai" style="color:red;">ì„œë²„ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>`);
                }
            });
        }

        function scrollToBottom() {
            const chatBox = document.getElementById('chat-box');
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</body>
</html> -->