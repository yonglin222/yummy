<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì•¼ë¯¸ì™€ ì±„íŒ…í•˜ê¸° - Yammi</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <link rel="stylesheet" th:href="@{/css/chat.css}">
</head>
<body>

    <!-- <th:block th:insert="~{modules/header :: headerFragment}" /> -->
    
    <div class="chat-wrapper">
        <div class="chat-box" id="chatBox">
            
            <div class="msg bot">
                <div class="bubble">
                    ì•ˆë…•í•˜ì„¸ìš”. ì €ëŠ” <strong>AI ì•¼ë¯¸</strong>ì˜ˆìš”ğŸ˜Š<br>
                    ë ˆì‹œí”¼ë¥¼ ì¶”ì²œí•´ë“œë¦´ê²Œìš”!
                </div>
            </div>

            <th:block th:if="${startUserMsg != null}">
                
                <div class="msg user">
                    <div class="bubble" th:text="${startUserMsg}"></div>
                </div>

                <div class="msg bot">
                    <div class="bubble" th:text="${startAiMsg}"></div>
                </div>

                <div class="msg bot" th:if="${startRecipe != null}">
                    <div class="bubble" style="background: #fff; border: 1px solid #ddd; padding: 0; overflow: hidden;">
                        <div style="padding: 15px;">
                            <h3 style="margin: 0 0 10px 0; font-size: 16px;">
                                ğŸ³ <span th:text="${startRecipe.name}">ìš”ë¦¬ëª…</span>
                            </h3>
                            <p style="margin: 0; font-size: 13px; color: #666;">
                                <span th:text="${startRecipe.serving}">1</span>ì¸ë¶„ Â· 
                                <span th:text="${startRecipe.time}">10</span>ë¶„
                            </p>
                        </div>
                        <a th:href="@{/recipe/detail/{id}(id=${startRecipe.recipeId})}" 
                           style="display: block; background: #6bae59; color: white; text-align: center; 
                                  padding: 10px; text-decoration: none; font-size: 14px;">
                           ë ˆì‹œí”¼ ë³´ëŸ¬ê°€ê¸°
                        </a>
                    </div>
                </div>
            </th:block>

        </div>
        
        <form class="chat-input" id="chatForm">
            <div class="input-wrap">
                <input type="text" id="userInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." autocomplete="off">
                <button type="submit" class="send-btn">
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </div>
        </form>
    </div>

    <!-- <th:block th:insert="~{modules/footer :: footer-body}" /> -->

    <script th:src="@{/js/modal.js}"></script>
    <script th:src="@{/js/header.js}"></script>
    <script th:src="@{/js/chat.js}"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const chatBox = document.getElementById("chatBox");
            chatBox.scrollTop = chatBox.scrollHeight;
        });
    </script>

</body>
</html>